(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Order/index"],{"666f":function(t,e,n){"use strict";var r=n("f27c"),i=n.n(r);i.a},"959f":function(t,e,n){"use strict";(function(t){n("8ef2");r(n("66fd"));var e=r(n("f6d7"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},ab19:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r}));var r={uTabsSwiper:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-tabs-swiper/u-tabs-swiper")]).then(n.bind(null,"1be6"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"e8a4"))},uSkeleton:function(){return n.e("uview-ui/components/u-skeleton/u-skeleton").then(n.bind(null,"1822"))},uTopTips:function(){return n.e("uview-ui/components/u-top-tips/u-top-tips").then(n.bind(null,"99a5"))}},i=function(){var t=this,e=t.$createElement;t._self._c},o=[]},b5b6:function(t,e,n){"use strict";n.r(e);var r=n("e67e"),i=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e["default"]=i.a},e67e:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("a34a")),i=n("4c0b");function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return l(t)||c(t)||u(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function c(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function l(t){if(Array.isArray(t))return f(t)}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){d(o,r,i,s,a,"next",t)}function a(t){d(o,r,i,s,a,"throw",t)}s(void 0)}))}}var p=function(){n.e("component/OrderItem").then(function(){return resolve(n("ea67"))}.bind(null,n)).catch(n.oe)},m=function(){Promise.all([n.e("common/vendor"),n.e("component/Z-empty")]).then(function(){return resolve(n("1839"))}.bind(null,n)).catch(n.oe)},v=function(){n.e("component/Z-toast").then(function(){return resolve(n("5867"))}.bind(null,n)).catch(n.oe)},g={components:{OrderItem:p,ZEmpty:m,ZToast:v},data:function(){return{list:[{title:"全部"},{title:"待公布"},{title:"已抢到"},{title:"待收货"},{title:"已完成"},{title:"未抢到"}],olderList:[],params:{m_id:"",status:0,p:1},current:0,swiperCurrent:0,loadSkeleton:!0,isLogin:!1,timer:null,triggered:!1,status:"loadmore",flag:!0,loadText:{loadmore:"用力往下拉(点击)",loading:"正在加载，请休息下...",nomore:"我也是有底线的~"}}},onLoad:function(e){t.showLoading({title:"正在加载...",mask:!0}),this.setObsevr()},onShow:function(){this.params.m_id=t.getStorageSync("m_id"),this.getOrderList()},watch:{"params.m_id":{handler:function(t){this.isLogin=!1,this.SwitchList(this.current)}}},methods:{tabsChange:function(t){var e=this;this.isLogin||(this.timer&&clearTimeout(this.timer),this.current=t,this.params.status=t,this.flag=!0,this.params.p=1,this.loadSkeleton=!0,this.timer=setTimeout((function(){e.SwitchList(t)}),500))},setObsevr:function(){for(var t=this.list.length,e=0;e<t;e++)this.$set(this.olderList,e,[])},getOrderList:function(){var e=this;return h(r.default.mark((function n(){var o,s;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,o=e.params.m_id,o&&""!==o){n.next=7;break}return e.isLogin=!0,e.loadSkeleton=!1,t.hideLoading(),n.abrupt("return");case 7:return n.next=9,(0,i.orderList)({m_id:o,status:0,p:1});case 9:s=n.sent,e.$set(e.olderList,0,s.list),e.loadSkeleton=!1,t.hideLoading(),n.next=19;break;case 15:n.prev=15,n.t0=n["catch"](0),e.loadSkeleton=!1,t.showToast({title:n.t0,icon:"none"});case 19:case"end":return n.stop()}}),n,null,[[0,15]])})))()},SwitchList:function(e,n){var o=this;return h(r.default.mark((function s(){var a;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,i.orderList)(o.params);case 3:a=r.sent,o.$set(o.olderList,e,a.list),o.loadSkeleton=!1,n&&(o.triggered=!1,o._freshing=!1),r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](0),o.loadSkeleton=!1,t.showToast({title:r.t0,icon:"none"});case 13:case"end":return r.stop()}}),s,null,[[0,9]])})))()},jumpLogin:function(){t.navigateTo({url:"/pages/My/login"})},onreachBottom:function(){this.flag&&(this.status="loading",this.params.p+=1,this.loadMore())},loadMore:function(){var e=this;(0,i.orderList)(this.params).then((function(t){if(0===t.list.length)e.flag=!1,e.params.p-=1,e.status="nomore",e.$refs.uToast.show({title:"没有更多订单了哦~"});else{var n=e.current;e.$set(e.olderList,n,[].concat(s(e.olderList[n]),s(t.list)))}})).catch((function(e){t.showToast({title:e,icon:"none"})}))},onPulling:function(){this.triggered=!0},onRefresh:function(){if(this.isLogin)return this.triggered=!1,void(this._freshing=!1);this._freshing||(this._freshing=!0,this.SwitchList(this.current,!0))},onRestore:function(){this.triggered="restore",this.isLogin?this.$refs.uTips.show({title:"您还未登录，请去登陆",type:"warning"}):this.$refs.uTips.show({title:"订单列表已刷新",type:"success"})},confirm:function(e){var n=this;return h(r.default.mark((function o(){return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,i.receipt)({m_id:n.params.m_id,e:e});case 3:r.sent,n.SwitchList(n.current),n.$refs.uTips.show({title:"操作成功",type:"success"}),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),t.showToast({title:r.t0,icon:"none"});case 11:case"end":return r.stop()}}),o,null,[[0,8]])})))()}}};e.default=g}).call(this,n("543d")["default"])},f27c:function(t,e,n){},f6d7:function(t,e,n){"use strict";n.r(e);var r=n("ab19"),i=n("b5b6");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("666f");var s,a=n("f0c5"),u=Object(a["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],s);e["default"]=u.exports}},[["959f","common/runtime","common/vendor"]]]);